pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
function _init()

 -- fill map
 for x = 0,16 do
  for y = 0,16 do
   mset(x, y, 1)
  end
 end

 course = downhill:new(-10000, 1)
 ter = terrain:new(-10000, course.len + 50, 1)

 -- debug stepping
 debug = false

end

function _update60()

 if btnp(4) or not debug then
 	player:update(ter)
  course:update(player)
 end
end

function _draw()

 if btnp(4) or not debug then
  cls()

  map(0, 0, 0, 0, 16, 16)

  camera(player.cx, player.cy)

  for xo = 0,2 do
   for yo = 0,2 do
    map(16, 0, 128 * (xo -1), 128 * (yo -1), 16, 16)
   end
  end

  -- reset camera
  if (player.cx > 127 or player.cx < -127) player.cx = 0
  if (player.cy > 127 or player.cy < -127) player.cy = 0

  camera(0,0)

  player:draw()
  ter:draw(player)
  course:draw(player)

 end
end
-->8
#include player_class.lua
#include downhill.lua
#include terrain.lua

__gfx__
00000000777777770000000000000000008885000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777770000000000100100008885000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700777777770000000000100100008885000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000777777770006000000100100000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000777777770000000000100100000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700777777770000000000100100000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777770000000000100100000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777770000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
